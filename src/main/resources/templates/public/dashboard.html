<!-- Location: src/main/resources/templates/public/dashboard.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}"></head>
<body>
    <nav th:replace="~{fragments/header :: navbar}"></nav>
    
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container text-center">
            <h1><i class="fas fa-chart-line"></i> Placement Statistics Dashboard</h1>
            <p>Track our students' placement achievements and success stories</p>
        </div>
    </div>
    
    <div class="container">
        <!-- Statistics Cards -->
        <div class="row">
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="icon"><i class="fas fa-users"></i></div>
                    <h3 th:text="${stats.totalPlacements}">0</h3>
                    <p>Total Placements</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="icon"><i class="fas fa-building"></i></div>
                    <h3 th:text="${#lists.size(stats.companyWiseStats)}">0</h3>
                    <p>Recruiting Companies</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="icon"><i class="fas fa-graduation-cap"></i></div>
                    <h3 th:text="${#lists.size(departmentStats)}">0</h3>
                    <p>Active Departments</p>
                </div>
            </div>
        </div>
        
        <!-- Department Filter -->
        <div class="filter-section">
            <h4><i class="fas fa-filter"></i> Filter by Department & Year</h4>
            <form th:action="@{/department-stats}" method="get" class="row g-3">
                <div class="col-md-5">
                    <label class="form-label">Department</label>
                    <select name="dept" class="form-select" required>
                        <option value="">Select Department</option>
                        <option th:each="dept : ${departments}" th:value="${dept}" th:text="${dept}"></option>
                    </select>
                </div>
                <div class="col-md-5">
                    <label class="form-label">Year</label>
                    <select name="year" class="form-select" required>
                        <option value="">Select Year</option>
                        <option th:each="year : ${years}" th:value="${year}" th:text="${year}"></option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label class="form-label">&nbsp;</label>
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-search"></i> View Stats
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Department-wise Statistics -->
        <div class="table-container">
            <h4><i class="fas fa-chart-bar"></i> Department-wise Placement Statistics</h4>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Department</th>
                        <th>Total Placements</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="stat : ${departmentStats}">
                        <td th:text="${stat[0]}">Computer Science</td>
                        <td>
                            <span class="badge bg-success" th:text="${stat[1]}">0</span>
                        </td>
                        <td>
                            <a th:href="@{/placements(department=${stat[0]})}" class="btn btn-sm btn-primary">
                                <i class="fas fa-eye"></i> View Details
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Recent Placements -->
        <div class="table-container">
            <h4><i class="fas fa-clock"></i> Recent Placements</h4>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Student Name</th>
                        <th>Company</th>
                        <th>Role</th>
                        <th>CTC (LPA)</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="placement : ${stats.recentPlacements}">
                        <td th:text="${placement.student.fullName}">John Doe</td>
                        <td th:text="${placement.company.companyName}">Google</td>
                        <td th:text="${placement.jobTitle}">Software Engineer</td>
                        <td>
                            <strong th:text="${placement.ctcAmount} + ' LPA'">12.5 LPA</strong>
                        </td>
                        <td th:text="${#temporals.format(placement.placementDate, 'dd MMM yyyy')}">01 Jan 2025</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Top Companies -->
        <div class="row">
            <div class="col-md-12">
                <div class="table-container">
                    <h4><i class="fas fa-trophy"></i> Top Recruiting Companies</h4>
                    <div class="row">
                        <div class="col-md-4" th:each="company, iterStat : ${stats.companyWiseStats}" th:if="${iterStat.index < 6}">
                            <div class="dept-card">
                                <h5 th:text="${company[0]}">Company Name</h5>
                                <p class="mb-0">
                                    <strong th:text="${company[1]} + ' Placements'">10 Placements</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer th:replace="~{fragments/footer :: footer}"></footer>
    <div th:replace="~{fragments/footer :: scripts}"></div>
</body>
</html>
